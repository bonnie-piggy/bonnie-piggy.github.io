
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>随机气泡互动</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e2e8f0;
            min-height: 100vh;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            text-align: center;
        }
        
        header {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, #4fd1c5, #38b2ac, #81e6d9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(76, 209, 197, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a0aec0;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .stats-container {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .stat-box {
            background: rgba(15, 23, 42, 0.8);
            padding: 1.2rem;
            border-radius: 10px;
            min-width: 180px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #4fd1c5;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #a0aec0;
        }
        
        .bubble-container {
            position: relative;
            width: 100%;
            height: 500px;
            margin: 2rem 0;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
        }
        
        button {
            padding: 0.8rem 1.5rem;
            background: rgba(56, 178, 172, 0.2);
            color: #4fd1c5;
            border: 1px solid #38b2ac;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        button:hover {
            background: rgba(56, 178, 172, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 209, 197, 0.3);
        }
        
        .instructions {
            background: rgba(15, 23, 42, 0.8);
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 800px;
        }
        
        .instructions h2 {
            color: #4fd1c5;
            margin-bottom: 1rem;
        }
        
        .instructions p {
            line-height: 1.6;
            color: #cbd5e0;
            margin-bottom: 0.5rem;
        }
        
        /* 气泡样式 */
        .bubble {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0);
            }
            25% {
                transform: translateY(-20px) translateX(10px);
            }
            50% {
                transform: translateY(-40px) translateX(-5px);
            }
            75% {
                transform: translateY(-20px) translateX(-10px);
            }
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .stats-container {
                gap: 1rem;
            }
            
            .stat-box {
                min-width: 140px;
            }
            
            .bubble-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>随机气泡互动</h1>
            <p class="subtitle">点击气泡，它们可能会消失或变得透明。看看你能让多少气泡消失！</p>
            
            <div class="stats-container">
                <div class="stat-box">
                    <div class="stat-value" id="total-bubbles">0</div>
                    <div class="stat-label">生成气泡总数</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="current-bubbles">0</div>
                    <div class="stat-label">当前气泡数量</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="popped-bubbles">0</div>
                    <div class="stat-label">消失气泡计数</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="click-count">0</div>
                    <div class="stat-label">点击次数</div>
                </div>
            </div>
        </header>
        
        <div class="bubble-container" id="bubble-container">
            <!-- 气泡将在这里生成 -->
        </div>
        
        <div class="controls">
            <button id="add-bubbles">添加气泡</button>
            <button id="reset-btn">重置</button>
        </div>
        
        <div class="instructions">
            <h2>游戏说明</h2>
            <p>• 每次点击"添加气泡"按钮会生成1-10个随机气泡</p>
            <p>• 气泡会缓慢浮动并改变透明度</p>
            <p>• 点击气泡时：有50%几率气泡会消失，50%几率气泡会变得几乎透明</p>
            <p>• 消失的气泡会被计数</p>
            <p>• 尝试点击所有气泡，看看你能让多少气泡消失！</p>
        </div>
    </div>

    <script>
        // 配置变量
        const CONFIG = {
            // 气泡大小范围
            minSize: 30,
            maxSize: 80,
            // 气泡颜色
            colors: [
                'rgba(79, 209, 197, 0.7)',   // 青色
                'rgba(56, 178, 172, 0.7)',   // 蓝绿色
                'rgba(49, 151, 149, 0.7)',   // 深蓝绿色
                'rgba(129, 230, 217, 0.7)',  // 浅青色
                'rgba(102, 217, 232, 0.7)',  // 天蓝色
                'rgba(116, 250, 213, 0.7)'   // 薄荷绿
            ],
            // 气泡浮动速度范围
            minFloatSpeed: 15,
            maxFloatSpeed: 30,
            // 气泡透明度变化范围
            minOpacity: 0.3,
            maxOpacity: 0.9,
            // 气泡透明度变化速度
            opacityChangeSpeed: 0.005
        };
        
        // 状态变量
        let state = {
            totalBubbles: 0,
            currentBubbles: 0,
            poppedBubbles: 0,
            clickCount: 0,
            bubbleElements: []
        };
        
        // DOM 元素
        const bubbleContainer = document.getElementById('bubble-container');
        const totalBubblesEl = document.getElementById('total-bubbles');
        const currentBubblesEl = document.getElementById('current-bubbles');
        const poppedBubblesEl = document.getElementById('popped-bubbles');
        const clickCountEl = document.getElementById('click-count');
        const addBubblesBtn = document.getElementById('add-bubbles');
        const resetBtn = document.getElementById('reset-btn');
        
        // 初始化
        function init() {
            // 添加初始气泡
            addRandomBubbles();
            
            // 事件监听器
            addBubblesBtn.addEventListener('click', addRandomBubbles);
            resetBtn.addEventListener('click', resetGame);
            
            // 开始气泡动画循环
            requestAnimationFrame(animateBubbles);
        }
        
        // 添加随机数量的气泡
        function addRandomBubbles() {
            // 随机生成1-10个气泡
            const bubbleCount = Math.floor(Math.random() * 10) + 1;
            
            for (let i = 0; i < bubbleCount; i++) {
                createBubble();
            }
            
            // 更新统计
            updateStats();
        }
        
        // 创建单个气泡
        function createBubble() {
            // 创建气泡元素
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            // 随机大小
            const size = Math.floor(Math.random() * (CONFIG.maxSize - CONFIG.minSize)) + CONFIG.minSize;
            
            // 随机位置（确保气泡完全在容器内）
            const containerWidth = bubbleContainer.clientWidth;
            const containerHeight = bubbleContainer.clientHeight;
            const left = Math.random() * (containerWidth - size * 2) + size;
            const top = Math.random() * (containerHeight - size * 2) + size;
            
            // 随机颜色
            const color = CONFIG.colors[Math.floor(Math.random() * CONFIG.colors.length)];
            
            // 设置气泡样式
            bubble.style.width = `${size}px`;
            bubble.style.height = `${size}px`;
            bubble.style.left = `${left}px`;
            bubble.style.top = `${top}px`;
            bubble.style.background = color;
            
            // 随机浮动速度
            const floatSpeed = Math.random() * (CONFIG.maxFloatSpeed - CONFIG.minFloatSpeed) + CONFIG.minFloatSpeed;
            bubble.style.setProperty('--float-speed', `${floatSpeed}s`);
            
            // 初始透明度
            const initialOpacity = Math.random() * (CONFIG.maxOpacity - CONFIG.minOpacity) + CONFIG.minOpacity;
            bubble.style.opacity = initialOpacity;
            
            // 添加浮动动画
            bubble.style.animation = `float ${floatSpeed}s infinite ease-in-out, pulse ${floatSpeed * 2}s infinite ease-in-out`;
            
            // 添加点击事件
            bubble.addEventListener('click', handleBubbleClick);
            
            // 添加到容器和状态
            bubbleContainer.appendChild(bubble);
            state.bubbleElements.push({
                element: bubble,
                opacityDirection: Math.random() > 0.5 ? 1 : -1, // 1表示增加，-1表示减少
                currentOpacity: initialOpacity
            });
            
            // 更新计数
            state.totalBubbles++;
            state.currentBubbles++;
        }
        
        // 处理气泡点击
        function handleBubbleClick(event) {
            const bubble = event.target;
            state.clickCount++;
            
            // 50%几率气泡消失，50%几率气泡变得几乎透明
            if (Math.random() > 0.5) {
                // 气泡消失
                bubble.style.transition = 'opacity 0.3s ease';
                bubble.style.opacity = '0';
                
                // 从状态中移除
                setTimeout(() => {
                    if (bubble.parentNode) {
                        bubble.parentNode.removeChild(bubble);
                        state.currentBubbles--;
                        state.poppedBubbles++;
                        updateStats();
                        
                        // 从状态数组中移除
                        state.bubbleElements = state.bubbleElements.filter(b => b.element !== bubble);
                    }
                }, 300);
            } else {
                // 气泡变得几乎透明
                bubble.style.transition = 'opacity 0.2s ease';
                bubble.style.opacity = '0.1';
                
                // 更新状态中的当前透明度
                const bubbleState = state.bubbleElements.find(b => b.element === bubble);
                if (bubbleState) {
                    bubbleState.currentOpacity = 0.1;
                }
            }
            
            // 更新统计
            updateStats();
        }
        
        // 气泡动画循环
        function animateBubbles() {
            state.bubbleElements.forEach(bubbleState => {
                const bubble = bubbleState.element;
                
                // 更新透明度
                bubbleState.currentOpacity += CONFIG.opacityChangeSpeed * bubbleState.opacityDirection;
                
                // 检查边界
                if (bubbleState.currentOpacity >= CONFIG.maxOpacity) {
                    bubbleState.currentOpacity = CONFIG.maxOpacity;
                    bubbleState.opacityDirection = -1; // 开始减少
                } else if (bubbleState.currentOpacity <= CONFIG.minOpacity) {
                    bubbleState.currentOpacity = CONFIG.minOpacity;
                    bubbleState.opacityDirection = 1; // 开始增加
                }
                
                // 应用透明度（如果气泡没有被点击过）
                if (parseFloat(bubble.style.opacity) > 0.1) {
                    bubble.style.opacity = bubbleState.currentOpacity;
                }
            });
            
            // 继续动画循环
            requestAnimationFrame(animateBubbles);
        }
        
        // 更新统计显示
        function updateStats() {
            totalBubblesEl.textContent = state.totalBubbles;
            currentBubblesEl.textContent = state.currentBubbles;
            poppedBubblesEl.textContent = state.poppedBubbles;
            clickCountEl.textContent = state.clickCount;
        }
        
        // 重置游戏
        function resetGame() {
            // 移除所有气泡
            while (bubbleContainer.firstChild) {
                bubbleContainer.removeChild(bubbleContainer.firstChild);
            }
            
            // 重置状态
            state = {
                totalBubbles: 0,
                currentBubbles: 0,
                poppedBubbles: 0,
                clickCount: 0,
                bubbleElements: []
            };
            
            // 更新统计
            updateStats();
            
            // 添加新的气泡
            addRandomBubbles();
        }
        
        // 页面加载完成后初始化
        window.addEventListener('load', init);
    </script>
</body>
</html>